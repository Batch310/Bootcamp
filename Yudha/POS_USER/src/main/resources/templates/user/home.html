<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Category</title>

<link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/vendor/fontawesome/css/all.min.css">

<script src="/vendor/jquery/jquery-3.6.3.min.js"></script>
<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/vendor/fontawesome/js/all.min.js"></script>

</head>

<body>
	<!-- Header -->
	<nav class="navbar navbar-dark bg-dark navbar-expand-sm">
		<a class="navbar-brand" href="#"> POS Batch 310 </a>
		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbar-list-4" aria-controls="navbarNav"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbar-list-4">
			<ul class="navbar-nav">
				<li class="nav-item dropdown"><a
					class="nav-link dropdown-toggle" href="#"
					id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false"> <img
						id="nav-profile-picture" src="/image/icon_profile_picture.png"
						width="40" height="40" class="rounded-circle">
				</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
						<h5 id="nav-username" class="dropdown-item">Welcome, [[${name}]] !</h5>
						<a class="dropdown-item" href="#" onclick="logOut()" )>Log Out</a>
					</div></li>
			</ul>
		</div>
	</nav>
	
	<!-- Table -->
		<table class="table">
			<!-- Baris Kontennya -->
			<tbody id="content-tbody">
				<tr>
					<td>MANCO</td>
					<td>Main Course</td>
				</tr>
				<tr>
					<td>SATE</td>
					<td>Sate</td>
				</tr>
				<tr>
					<td>IC</td>
					<td>ICE Cream</td>
					
				</tr>
				<tr>
					<td>CKE</td>
					<td>Cake</td>
				</tr>
			</tbody>

		</table>

	<footer class="container-fluid bg-dark text-white p-5 text-center">
		<h6>Â© 2023 Batch 310 - Java Spring Boot</h6>
	</footer>

	<!-- Modal -->
	<div class="modal" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Add Abcabc</h5>
					<button type="button" class="btn-close" data-dismiss="modal"
						aria-label="Close">
						<i class="fa fa-close"></i>
					</button>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
	
		function deleteSessionData(){
			return $.ajax({
				url: "/user/deleteLoginData",
				method: "GET",
				async: false
			});
		}
		
		function getMenu() {
			return $.ajax({
				url: "/user/home",
				method: "GET",
				async: false
			});
		}
		
		function logOut(){
			var redirectUrl = deleteSessionData().responseText;
			$(location).attr('href',redirectUrl);
		}
		
		var name = "[[${name}]]";
		var roleCode = "[[${role_code}]]";
		var profilePicture = "[[${profile_picture}]]";
		
		console.log(name);
		console.log(roleCode);
		console.log(profilePicture);
		
function refreshList() {
	var response = getMenu().responseJSON;
	console.log(response);

	var list = response.data;

	$("#content-tbody").html("");
	for (i = 0; i < list.length; i++) {
		$("#content-tbody").append(
			`
			<tr>
			<td>${list[i].initial}</td>
			<td>${list[i].name}</td> 
			<td><input type="checkbox" disabled 
				${list[i].active == true ? 'checked' : ''}></td>
			<td>
				<button class="btn btn-warning" 
				onclick="bukaPopupEdit(
						'${list[i].initial}',
						'${list[i].name}',
						${list[i].active},
						${list[i].id})">
					<i class="fa-solid fa-pen-to-square" color="white"></i>
				</button>
				<button class="btn btn-danger" 
				onclick="bukaPopupDelete(
						'${list[i].initial}',
						'${list[i].name}',
						${list[i].active},
						${list[i].id})">
					<i class="fa-solid fa-trash" color="white"></i>
				</button>
			</td>
			</tr>
			`
		)
	}
}

refreshList();
		
		
	
	</script>
</body>

</html>